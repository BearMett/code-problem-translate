# VS Code ì—ëŸ¬ ë²ˆì—­ í™•ì¥ í”„ë¡œê·¸ë¨ ê°œë°œ ê³„íšì„œ

## ê°œìš”

TypeScript ì»´íŒŒì¼ ì—ëŸ¬, ESLint ê²½ê³  ë“± VS Code Problems íŒ¨ë„ì˜ ì§„ë‹¨ ë©”ì‹œì§€ë¥¼ ë¡œì»¬ LLM(Ollama)ì„ í†µí•´ í•œêµ­ì–´ë¡œ ë²ˆì—­í•˜ëŠ” VS Code í™•ì¥ í”„ë¡œê·¸ë¨ ê°œë°œ

## ì‚¬ìš©ì ìš”êµ¬ì‚¬í•­

- **í”„ë¡œì íŠ¸ ìœ„ì¹˜**: ë³„ë„ í”„ë¡œì íŠ¸ë¡œ ìƒì„± (esl-cms ì™¸ë¶€)
- **Ollama**: ì´ë¯¸ ì„¤ì¹˜ë¨
- **UX ë°©ì‹**: Problems íŒ¨ë„ ì¶”ê°€ + í˜¸ë²„ ì‹œ ë²ˆì—­ í‘œì‹œ (ë‘˜ ë‹¤ ì§€ì›)

## ê¸°ìˆ ì  ê°€ëŠ¥ì„± ê²€ì¦ ê²°ê³¼

### Ollama API
- **Base URL**: `http://localhost:11434/api`
- **ì£¼ìš” ì—”ë“œí¬ì¸íŠ¸**: `/api/generate`, `/api/chat`
- **npm íŒ¨í‚¤ì§€**: `ollama` (ê³µì‹ JavaScript ë¼ì´ë¸ŒëŸ¬ë¦¬)
- **ì¥ì **: ë¬´ë£Œ, ì˜¤í”„ë¼ì¸ ì‚¬ìš©, ê°œì¸ì •ë³´ ë³´í˜¸

### VS Code Diagnostics API
- `vscode.languages.getDiagnostics()` - ëª¨ë“  ì§„ë‹¨ ì •ë³´ ì¡°íšŒ
- `vscode.languages.createDiagnosticCollection()` - ë²ˆì—­ëœ ì§„ë‹¨ìš© ì»¬ë ‰ì…˜ ìƒì„±
- `vscode.languages.onDidChangeDiagnostics` - ì§„ë‹¨ ë³€ê²½ ì´ë²¤íŠ¸ êµ¬ë…

## ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    VS Code Extension                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Diagnostics â”‚â”€â”€â”€â–¶â”‚ Translation â”‚â”€â”€â”€â–¶â”‚ Translated      â”‚ â”‚
â”‚  â”‚ Listener    â”‚    â”‚ Service     â”‚    â”‚ DiagnosticColl. â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                            â”‚                                â”‚
â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚                     â”‚   Cache     â”‚                        â”‚
â”‚                     â”‚  (LRU Map)  â”‚                        â”‚
â”‚                     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ HTTP
                      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                      â”‚   Ollama    â”‚
                      â”‚ localhost:  â”‚
                      â”‚   11434     â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## í•µì‹¬ ê¸°ëŠ¥

### 1. ì§„ë‹¨ ë©”ì‹œì§€ ë²ˆì—­
- TypeScript, ESLint, ê¸°íƒ€ ì–¸ì–´ ì„œë²„ ì—ëŸ¬ ì§€ì›
- ì›ë³¸ ë©”ì‹œì§€ ìœ ì§€ + ë²ˆì—­ë³¸ ì¶”ê°€ í‘œì‹œ
- ì—ëŸ¬ ì½”ë“œ (TS2322, no-unused-vars ë“±) ë³´ì¡´

### 2. ìºì‹± ì‹œìŠ¤í…œ
- LRU ìºì‹œë¡œ ë™ì¼ ë©”ì‹œì§€ ì¬ë²ˆì—­ ë°©ì§€
- íŒŒì¼ ê¸°ë°˜ ì˜êµ¬ ìºì‹œ (ì„ íƒì )
- ìºì‹œ ì ì¤‘ë¥  í‘œì‹œ

### 3. í•„í„°ë§
- ì›ë³¸ë§Œ / ë²ˆì—­ë§Œ / ë‘˜ ë‹¤ í‘œì‹œ
- ì†ŒìŠ¤ë³„ í•„í„° (TypeScript, ESLint ë“±)
- ì‹¬ê°ë„ë³„ í•„í„° (Error, Warning, Info)

### 4. ì„¤ì •
- Ollama ì„œë²„ URL
- ì‚¬ìš©í•  ëª¨ë¸ ì„ íƒ (qwen2.5, llama3.2 ë“±)
- ë²ˆì—­ ì–¸ì–´ (ê¸°ë³¸: í•œêµ­ì–´)
- ìë™ ë²ˆì—­ on/off

## í”„ë¡œì íŠ¸ êµ¬ì¡°

```
vscode-problem-translator/
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ esbuild.config.js
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ extension.ts              # ì§„ì…ì 
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ ollamaService.ts      # Ollama API í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚   â”œâ”€â”€ translationService.ts
â”‚   â”‚   â””â”€â”€ cacheService.ts
â”‚   â”œâ”€â”€ providers/
â”‚   â”‚   â”œâ”€â”€ diagnosticsProvider.ts # Problems íŒ¨ë„ ë²ˆì—­
â”‚   â”‚   â””â”€â”€ hoverProvider.ts       # í˜¸ë²„ ì‹œ ë²ˆì—­ í‘œì‹œ
â”‚   â”œâ”€â”€ commands/
â”‚   â”‚   â”œâ”€â”€ translateCommand.ts
â”‚   â”‚   â””â”€â”€ toggleCommand.ts
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ settings.ts
â”‚   â””â”€â”€ utils/
â”‚       â””â”€â”€ debounce.ts
â”œâ”€â”€ test/
â”‚   â””â”€â”€ extension.test.ts
â””â”€â”€ README.md
```

## êµ¬í˜„ ë‹¨ê³„

### Phase 1: í”„ë¡œì íŠ¸ ì„¤ì • (ê¸°ë°˜ êµ¬ì¶•)
- [ ] VS Code Extension í”„ë¡œì íŠ¸ ìƒì„± (Yeoman generator)
- [ ] TypeScript, esbuild ì„¤ì •
- [ ] ê¸°ë³¸ extension.ts êµ¬ì¡° ì‘ì„±
- [ ] package.jsonì— contributes (commands, configuration) ì •ì˜

### Phase 2: Ollama ì—°ë™
- [ ] OllamaService í´ë˜ìŠ¤ êµ¬í˜„
- [ ] ì—°ê²° ìƒíƒœ í™•ì¸ ê¸°ëŠ¥
- [ ] ë²ˆì—­ í”„ë¡¬í”„íŠ¸ ì„¤ê³„
- [ ] ìŠ¤íŠ¸ë¦¬ë° ì‘ë‹µ ì²˜ë¦¬

### Phase 3: ì§„ë‹¨ ì²˜ë¦¬
- [ ] DiagnosticsProvider êµ¬í˜„
- [ ] ê¸°ì¡´ ì§„ë‹¨ ìˆ˜ì§‘ (onDidChangeDiagnostics)
- [ ] ë²ˆì—­ëœ ì§„ë‹¨ ì»¬ë ‰ì…˜ ìƒì„±
- [ ] ì›ë³¸-ë²ˆì—­ ë§¤í•‘ ê´€ë¦¬

### Phase 4: ìºì‹±
- [ ] LRU ìºì‹œ êµ¬í˜„
- [ ] ìºì‹œ í‚¤ ìƒì„± (ë©”ì‹œì§€ í•´ì‹œ)
- [ ] ì˜êµ¬ ì €ì¥ì†Œ ì—°ë™ (globalState)

### Phase 5: í˜¸ë²„ ë²ˆì—­
- [ ] HoverProvider êµ¬í˜„
- [ ] ì—ëŸ¬ ë¼ì¸ì—ì„œ í˜¸ë²„ ì‹œ ë²ˆì—­ íŒì—… í‘œì‹œ
- [ ] ì›ë³¸ + ë²ˆì—­ + í•´ê²° íŒíŠ¸ í‘œì‹œ

### Phase 6: UI/UX
- [ ] ìƒíƒœ í‘œì‹œì¤„ ì•„ì´í…œ (ë²ˆì—­ ìƒíƒœ, ìºì‹œ ì ì¤‘ë¥ )
- [ ] ì„¤ì • í˜ì´ì§€ (Problems vs Hover vs ë‘˜ ë‹¤)
- [ ] í† ê¸€ ëª…ë ¹ì–´

### Phase 7: í…ŒìŠ¤íŠ¸ ë° ë°°í¬
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±
- [ ] í†µí•© í…ŒìŠ¤íŠ¸
- [ ] VSIX íŒ¨í‚¤ì§•
- [ ] Marketplace ë°°í¬ (ì„ íƒ)

## í•µì‹¬ ì½”ë“œ ìŠ¤ë‹ˆí«

### OllamaService
```typescript
export class OllamaService {
  private baseUrl: string;
  private model: string;

  async translate(message: string): Promise<string> {
    const response = await fetch(`${this.baseUrl}/api/generate`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        model: this.model,
        prompt: `ë‹¤ìŒ í”„ë¡œê·¸ë˜ë° ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ í•œêµ­ì–´ë¡œ ë²ˆì—­í•´ì£¼ì„¸ìš”. ê¸°ìˆ  ìš©ì–´ëŠ” ì˜ì–´ë¡œ ìœ ì§€í•˜ê³ , ê°„ê²°í•˜ê²Œ ë²ˆì—­í•˜ì„¸ìš”:\n\n"${message}"`,
        stream: false
      })
    });
    const data = await response.json();
    return data.response;
  }
}
```

### DiagnosticsProvider
```typescript
export class DiagnosticsProvider {
  private translatedCollection: vscode.DiagnosticCollection;

  constructor() {
    this.translatedCollection = vscode.languages.createDiagnosticCollection('translated');

    vscode.languages.onDidChangeDiagnostics(async (e) => {
      for (const uri of e.uris) {
        await this.translateDiagnostics(uri);
      }
    });
  }

  private async translateDiagnostics(uri: vscode.Uri) {
    const diagnostics = vscode.languages.getDiagnostics(uri);
    const translated = await Promise.all(
      diagnostics.map(d => this.translateOne(d))
    );
    this.translatedCollection.set(uri, translated);
  }
}
```

### HoverProvider
```typescript
export class TranslatedHoverProvider implements vscode.HoverProvider {
  async provideHover(
    document: vscode.TextDocument,
    position: vscode.Position
  ): Promise<vscode.Hover | undefined> {
    const diagnostics = vscode.languages.getDiagnostics(document.uri);
    const diagnostic = diagnostics.find(d => d.range.contains(position));

    if (!diagnostic) return undefined;

    const translated = await this.translationService.translate(diagnostic.message);

    const content = new vscode.MarkdownString();
    content.appendMarkdown(`**ì›ë³¸**: ${diagnostic.message}\n\n`);
    content.appendMarkdown(`**ë²ˆì—­**: ${translated}\n`);

    return new vscode.Hover(content, diagnostic.range);
  }
}
```

## ê¶Œì¥ ëª¨ë¸

| ëª¨ë¸ | í¬ê¸° | ì†ë„ | ë²ˆì—­ í’ˆì§ˆ | ê¶Œì¥ ìš©ë„ |
|------|------|------|----------|----------|
| qwen2.5:3b | 2GB | ë¹ ë¦„ | ì–‘í˜¸ | ì¼ë°˜ ì‚¬ìš© |
| llama3.2:3b | 2GB | ë¹ ë¦„ | ì–‘í˜¸ | ì¼ë°˜ ì‚¬ìš© |
| qwen2.5:7b | 4.5GB | ë³´í†µ | ìš°ìˆ˜ | ê³ í’ˆì§ˆ í•„ìš” ì‹œ |

## ê²€ì¦ ë°©ë²•

1. **Ollama ì„¤ì¹˜ ë° ëª¨ë¸ ë‹¤ìš´ë¡œë“œ**
   ```bash
   ollama pull qwen2.5:3b
   ollama serve
   ```

2. **í™•ì¥ í”„ë¡œê·¸ë¨ í…ŒìŠ¤íŠ¸**
   - F5ë¡œ Extension Development Host ì‹¤í–‰
   - TypeScript ì—ëŸ¬ê°€ ìˆëŠ” íŒŒì¼ ì—´ê¸°
   - Problems íŒ¨ë„ì—ì„œ ë²ˆì—­ í™•ì¸

3. **ì„±ëŠ¥ í…ŒìŠ¤íŠ¸**
   - 100ê°œ ì´ìƒì˜ ì—ëŸ¬ê°€ ìˆëŠ” í”„ë¡œì íŠ¸ì—ì„œ í…ŒìŠ¤íŠ¸
   - ìºì‹œ ì ì¤‘ë¥  ë° ì‘ë‹µ ì‹œê°„ ì¸¡ì •

## ì˜ˆìƒ ê²°ê³¼ë¬¼

```
â”Œâ”€ PROBLEMS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âŒ main.ts                                               â”‚
â”‚   [TS2322] Type 'string' is not assignable to 'number'  â”‚
â”‚   ğŸŒ [TS2322] 'string' íƒ€ì…ì€ 'number'ì— í• ë‹¹í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤ â”‚
â”‚                                                          â”‚
â”‚ âš ï¸ utils.ts                                              â”‚
â”‚   [no-unused-vars] 'foo' is defined but never used      â”‚
â”‚   ğŸŒ [no-unused-vars] 'foo'ê°€ ì •ì˜ë˜ì—ˆì§€ë§Œ ì‚¬ìš©ë˜ì§€ ì•ŠìŒ   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ì°¸ê³  ìë£Œ

- [Ollama VS Code Integration](https://docs.ollama.com/integrations/vscode)
- [VS Code Extension API](https://code.visualstudio.com/api/references/vscode-api)
- [Microsoft vscode-extension-samples](https://github.com/microsoft/vscode-extension-samples)
- [Building VS Code Extensions Guide](https://abdulkadersafi.com/blog/building-vs-code-extensions-in-2026-the-complete-modern-guide)
